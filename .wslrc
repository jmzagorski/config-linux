#!/bin/bash

#bug in wsl
source /etc/environment

# bug in 1903, symlinks to exe wont work
function dotnet() {
  /mnt/c/Program\ Files/dotnet/dotnet.exe "$@"
}

function sqlcmd() {
  /mnt/c/Program\ Files/Microsoft\ SQL\ Server/Client\ SDK/ODBC/170/Tools/Binn/SQLCMD.EXE "$@"
}

function msbuild() {
  /mnt/c/Program\ Files\ \(x86\)/Microsoft\ Visual\ Studio/2019/Enterprise/MSBuild/Current/Bin/MSBuild.exe "$@"
}

function chrome() {
  /mnt/c/Program\ Files\ \(x86\)/Google/Chrome/Application/chrome.exe "$@"
}

function firefox() {
  /mnt/c/Program\ Files/Mozilla\ Firefox/firefox.exe "$@"
}

function edge() {
    /mnt/c/Program\ Files\ \(x86\)/Microsoft/Edge/Application/msedge.exe "$@"
}

git() {
    command git -c "gpg.program=/mnt/c/Program Files (x86)/GnuPG/bin/gpg.exe" "$@"
}

export -f dotnet
export -f sqlcmd
export -f msbuild
export -f chrome
export -f firefox
export -f git

# YUBIKEY WSL
[ -e /usr/local/bin/gpg ] && rm /usr/local/bin/gpg; ln -s /mnt/c/Program\ Files\ \(x86\)/GnuPG/bin/gpg.exe /usr/local/bin/gpg
[ -e /usr/local/bin/gpg2 ] && rm /usr/local/bin/gpg2; ln -s gpg /usr/local/bin/gpg2
sudo ln -s gpg /usr/local/bin/gpg2
